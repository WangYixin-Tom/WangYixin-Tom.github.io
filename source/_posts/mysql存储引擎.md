---
title: mysql存储引擎
top: false
cover: false
toc: true
mathjax: true
date: 2021-04-11 09:30:57
password:
summary:
tags:
- mysql
categories:
- mysql
---

## innodb和myisiam区别

**Innodb引擎：**支持数据库ACID事务。并且还提供了行级锁和外键。它的设计的目标就是处理大数据容量的数据库系统，InnoDB 适合频繁修改以及涉及到安全性较高的应用；。

**MyIASM引擎**：不提供事务的支持，也不支持行级锁和外键。MyISAM 适合查询以及插入为主的应用

|                 | **MyISAM**                                                   | **Innodb**                                                   |
| --------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 存储结构        | **每张表被存放在三个文件：frm表格定义、MYD数据文件、MYI索引文件** | **所有的表都保存在同一个数据文件中**（也可能是多个文件，或者是独立的表空间文件） |
| 存储空间        | MyISAM索引是有压缩的，存储空间较小                           | InnoDB的表需要更多的内存和存储，它会在主内存中建立其专用的缓冲池用于高速缓冲数据和索引 |
| 文件格式        | **数据和索引是分别存储的，数据.MYD，索引.MYI**               | **数据和索引是集中存储的，.ibd**                             |
| 记录存储顺序    | 按记录插入顺序保存                                           | 按主键大小有序插入                                           |
| 外键            | 不支持                                                       | 支持                                                         |
| 事务            | 不支持                                                       | 支持                                                         |
| 锁支持          | 表级锁定                                                     | 行级锁定、表级锁定，锁定力度小并发能力高                     |
| select count(*) | myisam更快，myisam内部维护了计数器。                         |                                                              |
| 索引的实现方式  | B+树索引                                                     | B+树索引                                                     |

### MyISAM索引与InnoDB索引的区别

InnoDB索引是**聚簇索引**，MyISAM索引是**非聚簇索引**。

InnoDB的主键索引的叶子节点存储着行数据，因此主键索引非常高效；MyISAM索引的叶子节点存储的是行数据地址，需要再寻址一次才能得到数据。

InnoDB非主键索引的叶子节点存储的是主键和其他带索引的列数据，因此查询时做到覆盖索引会非常高效

**其他**

- 清空整个表时，InnoDB是一行一行的删除，效率非常慢。MyISAM则会重建表

### InnoDB引擎的4大特性

- 插入缓冲
- 二次写
- 自适应哈希索引
- 预读

### 存储引擎选择

如果没有特别的需求，使用默认的Innodb即可。

MyISAM：以读写插入为主的应用程序，比如博客系统、新闻门户网站。

Innodb：更新（删除）操作频率也高，或者要保证数据的完整性；并发量高，支持事务和外键。比如OA自动化办公系统。